
CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/project.h.in ${GENERATED_SOURCE_DIR}/project.h)

INCLUDE(source_groups.cmake)

INCLUDE(default_files.cmake)

INCLUDE(voice_rec.cmake)

ADD_LIBRARY(code STATIC ${file_root} ${DEF_OUT_FILES} ${VOICE_REC_FILES})

set_target_properties(code PROPERTIES
	COMPILE_DEFINITIONS_RELEASE "NDEBUG"
	COMPILE_DEFINITIONS_DEBUG "_DEBUG"
)

IF(MSVC)
	set_target_properties(code PROPERTIES
		COMPILE_DEFINITIONS_DEBUG "_DEBUG;PDB_DEBUGGING=1;_HAS_ITERATOR_DEBUGGING=0"
	)
ENDIF(MSVC)

IF (FSO_USE_SPEECH)
	INCLUDE_DIRECTORIES(${SPEECH_INCLUDE_DIRS})
	ADD_DEFINITIONS(-DFS2_SPEECH)
ENDIF(FSO_USE_SPEECH)

TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${COMPILER_INCLUDES})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${PLATFORM_INCLUDES})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${OPENAL_INCLUDE_DIR})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${VORBIS_INCLUDE_DIRS})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${LUA_INCLUDE_DIR})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${PNG_INCLUDE_DIR})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${JPEG_INCLUDE_DIR})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${CODE_HEADERS})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${FREESPACE_HEADERS})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${OGG_INCLUDE_DIRS})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${VORBIS_INCLUDE_DIRS})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${VORBISFILE_INCLUDE_DIRS})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${THEORA_INCLUDE_DIRS})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${GENERATED_SOURCE_DIR})
TARGET_INCLUDE_DIRECTORIES(code PUBLIC ${GENERATED_SOURCE_DIR}/code)

# Headers for standalone "gui" on UNIX
IF(UNIX)
	TARGET_INCLUDE_DIRECTORIES(code ${JANSSON_INCLUDE_DIR})
	TARGET_INCLUDE_DIRECTORIES(code ${MONGOOSE_INCLUDE_DIR})
ENDIF(UNIX)
